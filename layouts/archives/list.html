{{ define "main" }}
<a id="top"></a>
<div class="archives">
  <h2>Archives</h2>
  
  <div id="menu">
    <a href="{{ "/" | relURL }}">Main</a>
  </div>
  
  <br />
  <strong>Browse by year</strong>
  <div>
    {{- $years := .Site.Taxonomies.years -}}
    {{- $yearsList := slice -}}
    {{- range $yearName, $_ := $years -}}
      {{- $yearsList = $yearsList | append $yearName -}}
    {{- end -}}
    {{- $yearsList = sort $yearsList "value" "desc" -}}
    {{ range $yearsList }}
    <div class="entry-line">
      <a href="{{ "/years/" | relURL }}{{ . | urlize }}/">{{ . }}</a> 
      <span class="entry-count">({{ len (index $years .) }} {{ if eq (len (index $years .)) 1 }}entry{{ else }}entries{{ end }})</span>
    </div>
    {{ end }}
  </div>
  
  <br />
  <strong>Browse by category</strong>
  <div>
    {{ range $name, $taxonomy := .Site.Taxonomies.categories }}
    <div class="entry-line">
      <a href="{{ "/categories/" | relURL }}{{ $name | urlize }}/">{{ $name }}</a> 
      <span class="entry-count">({{ len $taxonomy }} {{ if eq (len $taxonomy) 1 }}entry{{ else }}entries{{ end }})</span>
    </div>
    {{ end }}
  </div>
  
  <br />
  <strong>Browse by entry</strong>
  <div>
    {{ range .Site.RegularPages.ByDate.Reverse }}
    <div class="entry-line">
      <span class="entry-date">{{ .Date.Format "2006/01/02" }}</span>
      <a href="{{ .RelPermalink }}">{{ .Title }}</a>
      {{- with .Params.categories -}}
        {{- range $index, $category := . -}}
          {{- if eq $index 0 }} - {{ end -}}
          {{- if gt $index 0 }}, {{ end -}}
          <a href="{{ "/categories/" | relURL }}{{ $category | urlize }}/">{{ $category }}</a>
        {{- end -}}
      {{- end -}}
    </div>
    {{ end }}
  </div>
</div>
{{ end }}
